%% I. First close all windows and clear workspace
close all;
clear simopt simdata;

%% II. Define simulation params
simopt.system = {'examplesys2'};
simopt.params = {[]};
simopt.x0 = {[-2 -2],[-1.5 -2],[-1 -2],[-0.5 -2],[0 -2],[0.4 -2],...
    [2 -2],[2 -1.5],[2 -1],[2 -0.5],[2 0],...
    [-2 2],[-1.5 2],[-1 2],[-0.5 2],[0 2],...
    [-2 -1.5],[-2 -1],[-2 -0.5],[-2 0],[-2 0.4],...
    [2 0.35],[2 0.39],[2 0.4],[2 0.41],[2 0.43],[2 0.45],[2 0.2],[2 0.6],...
    [0.35 2],[0.39 2],[0.4 2],[0.41 2],[0.43 2],[0.45 2],[0.2 2],[0.6 2]};
simopt.timesteps = {70};
simopt.horizon = {0};
simopt.dt = {0.1};
simopt.delays = {1};
simopt.noise = {{struct('type','none')}};

simopt = combinedata(simopt);

%% III. Simulate system
for i = 1:length(simopt)
    simdata{i} = simsys(simopt{i},config);
end

%% IV. Plot trajectories
for i = 1:length(simdata)
    X = simdata{1,i}.X;
    plot(X(1,:),X(2,:),'Color','k'); 
    hold on;
end
plot(1,1,'.');
ylim([-2 2]);
xlim([-2 2]);

%% V. Save as tikz
pgfplot(simdata{1,1}.X(1,:),simdata{1,1}.X(2,:),'1',...
    simdata{1,2}.X(1,:),simdata{1,2}.X(2,:),'2',...
    simdata{1,3}.X(1,:),simdata{1,3}.X(2,:),'3',...
    simdata{1,4}.X(1,:),simdata{1,4}.X(2,:),'4',...
    simdata{1,5}.X(1,:),simdata{1,5}.X(2,:),'5',...
    simdata{1,6}.X(1,:),simdata{1,6}.X(2,:),'6',...
    simdata{1,7}.X(1,:),simdata{1,7}.X(2,:),'7',...
    simdata{1,8}.X(1,:),simdata{1,8}.X(2,:),'8',...
    simdata{1,9}.X(1,:),simdata{1,9}.X(2,:),'9',...
    simdata{1,10}.X(1,:),simdata{1,10}.X(2,:),'10',...
    simdata{1,11}.X(1,:),simdata{1,11}.X(2,:),'11',...
    simdata{1,12}.X(1,:),simdata{1,12}.X(2,:),'12',...
    simdata{1,13}.X(1,:),simdata{1,13}.X(2,:),'13',...
    simdata{1,14}.X(1,:),simdata{1,14}.X(2,:),'14',...
    simdata{1,15}.X(1,:),simdata{1,15}.X(2,:),'15',...
    simdata{1,16}.X(1,:),simdata{1,16}.X(2,:),'16',...
    simdata{1,17}.X(1,:),simdata{1,17}.X(2,:),'17',...
    simdata{1,18}.X(1,:),simdata{1,18}.X(2,:),'18',...
    simdata{1,19}.X(1,:),simdata{1,19}.X(2,:),'19',...
    simdata{1,20}.X(1,:),simdata{1,20}.X(2,:),'20',...
    simdata{1,21}.X(1,:),simdata{1,21}.X(2,:),'21',...
    simdata{1,22}.X(1,:),simdata{1,22}.X(2,:),'22',...
    simdata{1,23}.X(1,:),simdata{1,23}.X(2,:),'23',...
    simdata{1,24}.X(1,:),simdata{1,24}.X(2,:),'24',...
    simdata{1,25}.X(1,:),simdata{1,25}.X(2,:),'25',...
    simdata{1,26}.X(1,:),simdata{1,26}.X(2,:),'26',...
    simdata{1,27}.X(1,:),simdata{1,27}.X(2,:),'27',...
    simdata{1,28}.X(1,:),simdata{1,28}.X(2,:),'28',...
    simdata{1,29}.X(1,:),simdata{1,29}.X(2,:),'29',...
    simdata{1,30}.X(1,:),simdata{1,30}.X(2,:),'30',...
    simdata{1,31}.X(1,:),simdata{1,31}.X(2,:),'31',...
    simdata{1,32}.X(1,:),simdata{1,32}.X(2,:),'32',...
    simdata{1,33}.X(1,:),simdata{1,33}.X(2,:),'33',...
    simdata{1,34}.X(1,:),simdata{1,34}.X(2,:),'34',...
    simdata{1,35}.X(1,:),simdata{1,35}.X(2,:),'35',...
    simdata{1,36}.X(1,:),simdata{1,36}.X(2,:),'36',...
    simdata{1,37}.X(1,:),simdata{1,37}.X(2,:),'37',...
    '2_bsp2','C:\Users\bouaz\Desktop\Thesis\pics');










